<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Tutorials · PortfolioAnalytics.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">PortfolioAnalytics.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../installation/">Installation</a></li><li class="is-active"><a class="tocitem" href>Tutorials</a><ul class="internal"><li><a class="tocitem" href="#Investment-Returns"><span>Investment Returns</span></a></li><li><a class="tocitem" href="#Portfolio-Return"><span>Portfolio Return</span></a></li><li><a class="tocitem" href="#Average-returns-and-risk"><span>Average returns and risk</span></a></li><li><a class="tocitem" href="#Comparing-returns-and-risk"><span>Comparing returns and risk</span></a></li><li><a class="tocitem" href="#Moments"><span>Moments</span></a></li><li><a class="tocitem" href="#Sharpe-Ratio"><span>Sharpe Ratio</span></a></li><li><a class="tocitem" href="#Value-at-Risk"><span>Value at Risk</span></a></li><li><a class="tocitem" href="#Expected-Shortfall-(CVaR)"><span>Expected Shortfall (CVaR)</span></a></li><li><a class="tocitem" href="#Portfolio-Optimization"><span>Portfolio Optimization</span></a></li></ul></li><li><a class="tocitem" href="../functions/">Functions</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Tutorials</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Tutorials</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/doganmehmet/PortfolioAnalytics.jl/blob/main/docs/src/tutorials.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Tutorials"><a class="docs-heading-anchor" href="#Tutorials">Tutorials</a><a id="Tutorials-1"></a><a class="docs-heading-anchor-permalink" href="#Tutorials" title="Permalink"></a></h1><p>Except for the code examples and equations, this tutorial&#39;s content is generated by <em>Microsoft Bing Chat</em> and modified for clarity.</p><p>Throughout this tutorial, we will use the monthly stock prices of Tesla, Netflix, and Microsoft from Dec 2020 through Dec 2021.</p><pre><code class="language-julia hljs">using PortfolioAnalytics
using Dates
using TSFrames

dates = Date(2020, 12, 31):Month(1):Date(2021, 12, 31);
TSLA = [235.22,264.51,225.16,222.64,236.48,208.40,226.56,229.06,245.24,258.49,371.33,381.58,352.26];
NFLX = [540.73,532.39,538.85,521.66,513.47,502.81,528.21,517.57,569.19,610.34,690.31,641.90,602.44];
MSFT = [222.42,231.96,232.38,235.77,252.18,249.68,270.90,284.91,301.88,281.92,331.62,330.59,336.32];

prices_ts = TSFrame([TSLA NFLX MSFT], dates, colnames=[:TSLA, :NFLX, :MSFT])</code></pre><pre><code class="language-julia hljs">13×3 TSFrame with Date Index
 Index       TSLA     NFLX     MSFT    
 Date        Float64  Float64  Float64 
───────────────────────────────────────
 2020-12-31   235.22   540.73   222.42 
 2021-01-31   264.51   532.39   231.96 
 2021-02-28   225.16   538.85   232.38 
 2021-03-31   222.64   521.66   235.77 
 2021-04-30   236.48   513.47   252.18 
 2021-05-31   208.4    502.81   249.68 
 2021-06-30   226.56   528.21   270.9  
 2021-07-31   229.06   517.57   284.91 
 2021-08-31   245.24   569.19   301.88 
 2021-09-30   258.49   610.34   281.92 
 2021-10-31   371.33   690.31   331.62
 2021-11-30   381.58   641.9    330.59
 2021-12-31   352.26   602.44   336.32</code></pre><pre><code class="language-julia hljs">weights = [0.4, 0.4, 0.2]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">3-element Vector{Float64}:
 0.4
 0.4
 0.2</code></pre><pre><code class="language-julia hljs">plot(prices_ts, size = (600, 420))
title!(&quot;Stock prices&quot;)
xlabel!(&quot;Date&quot;)
ylabel!(&quot;Price&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">qt.qpa.xcb: could not connect to display
qt.qpa.plugin: Could not load the Qt platform plugin &quot;xcb&quot; in &quot;&quot; even though it was found.
This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.

Available platform plugins are: linuxfb, minimal, offscreen, vnc, xcb.

Aborted (core dumped)
connect: Connection refused
GKS: can&#39;t connect to GKS socket application

GKS: Open failed in routine OPEN_WS
GKS: GKS not in proper state. GKS must be either in the state WSOP or WSAC in routine ACTIVATE_WS</code></pre><p><img src="../s-plot.svg" alt/></p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p><strong>PortfolioAnalytics</strong> encourages you to <strong>&quot;Know Your Data&quot;</strong>. Some functions may not work in presence of <code>missing</code> and <code>NA</code> values.</p></div></div><div class="admonition is-success"><header class="admonition-header">Tip</header><div class="admonition-body"><p>There is no <code>dropmissing</code> function for a <code>TSFrame</code> object. However, you can convert your data to <code>DataFrame</code>, drop <code>missing</code> values, and convert it back to a <code>TSFrame</code> object.</p></div></div><h2 id="Investment-Returns"><a class="docs-heading-anchor" href="#Investment-Returns">Investment Returns</a><a id="Investment-Returns-1"></a><a class="docs-heading-anchor-permalink" href="#Investment-Returns" title="Permalink"></a></h2><p>An investment return is the change in value of an invested vehicle over time. It can be positive (profit) or negative (loss). The total  return includes any additional payments such as dividends, coupon payments etc. and price change, while the nominal return only includes price change. </p><p>In this tutorial, we will use nominal return.</p><h4 id="Simple-return"><a class="docs-heading-anchor" href="#Simple-return">Simple return</a><a id="Simple-return-1"></a><a class="docs-heading-anchor-permalink" href="#Simple-return" title="Permalink"></a></h4><p class="math-container">\[Return = \frac{P_t}{P_{t-1}} - 1\]</p><pre><code class="language-julia hljs">returns = Return(prices_ts)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">12×3 TSFrame with Dates.Date Index
 Index       TSLA        NFLX        MSFT
 Date        Float64?    Float64?    Float64?
─────────────────────────────────────────────────
 2021-01-31   0.124522   -0.0154236   0.0428918
 2021-02-28  -0.148766    0.012134    0.00181066
 2021-03-31  -0.011192   -0.0319013   0.0145882
 2021-04-30   0.0621631  -0.0156999   0.0696017
 2021-05-31  -0.118742   -0.0207607  -0.00991355
 2021-06-30   0.0871401   0.0505161   0.0849888
 2021-07-31   0.0110346  -0.0201435   0.0517165
 2021-08-31   0.0706365   0.0997353   0.0595627
 2021-09-30   0.0540287   0.0722957  -0.066119
 2021-10-31   0.436535    0.131025    0.176291
 2021-11-30   0.0276035  -0.0701279  -0.00310596
 2021-12-31  -0.0768384  -0.0614737   0.0173326</code></pre><h4 id="Log-return"><a class="docs-heading-anchor" href="#Log-return">Log return</a><a id="Log-return-1"></a><a class="docs-heading-anchor-permalink" href="#Log-return" title="Permalink"></a></h4><p>A <em>log return</em> is a way of calculating the rate of return on an investment using natural logarithms. It is sometimes preferred over simple percentage returns because it has advantages like infinite support and time-additivity. You can calculate the log return by specifying the <strong>method</strong> argument.</p><p class="math-container">\[Return = LN\frac{P_t}{P_{t-1}}\]</p><pre><code class="language-julia hljs">Return(prices_ts, method = &quot;log&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">12×3 TSFrame with Dates.Date Index
 Index       TSLA        NFLX        MSFT
 Date        Float64?    Float64?    Float64?
─────────────────────────────────────────────────
 2021-01-31   0.117358   -0.0155438   0.0419975
 2021-02-28  -0.161068    0.0120609   0.00180902
 2021-03-31  -0.0112551  -0.0324212   0.0144828
 2021-04-30   0.0603075  -0.0158244   0.0672864
 2021-05-31  -0.126404   -0.0209792  -0.00996302
 2021-06-30   0.0835505   0.0492816   0.0815697
 2021-07-31   0.0109742  -0.0203492   0.0504236
 2021-08-31   0.0682533   0.0950695   0.0578562
 2021-09-30   0.0526197   0.0698019  -0.0684062
 2021-10-31   0.362234    0.123125    0.162366
 2021-11-30   0.0272294  -0.0727082  -0.0031108
 2021-12-31  -0.079951   -0.0634445   0.0171842</code></pre><h2 id="Portfolio-Return"><a class="docs-heading-anchor" href="#Portfolio-Return">Portfolio Return</a><a id="Portfolio-Return-1"></a><a class="docs-heading-anchor-permalink" href="#Portfolio-Return" title="Permalink"></a></h2><p>A portfolio return refers to how much an investment portfolio gains or loses in a given period. It depends on the expected return and weight of each holding in the portfolio and any dividends or fees involved.</p><p>To calculate your portfolio return, you need to know the returns and weights of each asset type. Then, you can use this formula:</p><p class="math-container">\[R_{p, t=1} = W_{A1,t=1}*R_{A1,t=1} + W_{A2,t=1}*R_{A2,t=1} + W_{AN,t=1}*R_{AN,t=1}\]</p><p class="math-container">\[R_{p, t=2} = W_{A1,t=2}*R_{A1,t=2} + W_{A2,t=2}*R_{A2,t=2} + W_{AN,t=2}*R_{AN,t=2}\]</p><p class="math-container">\[R_{p, t=N} = W_{A1,t=N}*R_{A1,t=N} + W_{A2,t=N}*R_{A2,t=N} + W_{AN,t=N}*R_{AN,t=N}\]</p><p>Where:</p><ul><li><span>$R_{p, t}$</span> is the portfolio return at period <code>t</code>.</li><li><code>R</code> is the return of an asset at periods <code>1</code>, <code>2</code> and so on.</li><li><code>W</code> is the weight of an asset in a portfolio at periods <code>1</code>, <code>2</code> and so on.</li></ul><p>Note that <em>portfolio_return( )</em> function assumes:</p><ul><li>the same weight for the holding period (<code>W</code> is the same at <code>t=1</code> through <code>t=N</code>).</li></ul><pre><code class="language-julia hljs">preturns = portfolio_return(prices_ts, weights)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">12×1 TSFrame with Dates.Date Index
 Index       PORT
 Date        Float64?
─────────────────────────
 2021-01-31   0.0522176
 2021-02-28  -0.0542905
 2021-03-31  -0.0143197
 2021-04-30   0.0325056
 2021-05-31  -0.0577836
 2021-06-30   0.0720602
 2021-07-31   0.00669974
 2021-08-31   0.0800613
 2021-09-30   0.037306
 2021-10-31   0.262282
 2021-11-30  -0.017631
 2021-12-31  -0.0518583</code></pre><p>Like the <em>Return( )</em> function, you can choose the method of return calculation using the <strong>method</strong> argument.</p><pre><code class="language-julia hljs">portfolio_return(prices_ts, weights, method = &quot;log&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">12×1 TSFrame with Dates.Date Index
 Index       PORT
 Date        Float64?
─────────────────────────
 2021-01-31   0.0491251
 2021-02-28  -0.0592409
 2021-03-31  -0.014574
 2021-04-30   0.0312505
 2021-05-31  -0.060946
 2021-06-30   0.0694468
 2021-07-31   0.00633473
 2021-08-31   0.0769004
 2021-09-30   0.0352874
 2021-10-31   0.226617
 2021-11-30  -0.0188137
 2021-12-31  -0.0539213</code></pre><p>It&#39;s possible to overwrite the default column name for the portfolio return column using the <strong>colname</strong> argument. To calculate the investment returns for a higher than one period, set a positive integer value for the <strong>period</strong> argument. </p><pre><code class="language-julia hljs">portfolio_return(prices_ts, weights, period = 3, method = &quot;log&quot;, colname = &quot;PRETURN&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">10×1 TSFrame with Dates.Date Index
 Index       PRETURN
 Date        Float64?
────────────────────────
 2021-03-31  -0.0246898
 2021-04-30  -0.0425644
 2021-05-31  -0.0442695
 2021-06-30   0.0397512
 2021-07-31   0.0148355
 2021-08-31   0.152682
 2021-09-30   0.118522
 2021-10-31   0.338805
 2021-11-30   0.24309
 2021-12-31   0.153882</code></pre><div class="admonition is-success"><header class="admonition-header">Tip</header><div class="admonition-body"><p>You can join <em>TSFrame</em> objects with the <strong>join( )</strong> function from the <em>TSFrames</em> package.</p></div></div><pre><code class="language-julia hljs">all_returns = TSFrames.join(returns, preturns)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">12×4 TSFrame with Dates.Date Index
 Index       TSLA        NFLX        MSFT         PORT
 Date        Float64?    Float64?    Float64?     Float64?
──────────────────────────────────────────────────────────────
 2021-01-31   0.124522   -0.0154236   0.0428918    0.0522176
 2021-02-28  -0.148766    0.012134    0.00181066  -0.0542905
 2021-03-31  -0.011192   -0.0319013   0.0145882   -0.0143197
 2021-04-30   0.0621631  -0.0156999   0.0696017    0.0325056
 2021-05-31  -0.118742   -0.0207607  -0.00991355  -0.0577836
 2021-06-30   0.0871401   0.0505161   0.0849888    0.0720602
 2021-07-31   0.0110346  -0.0201435   0.0517165    0.00669974
 2021-08-31   0.0706365   0.0997353   0.0595627    0.0800613
 2021-09-30   0.0540287   0.0722957  -0.066119     0.037306
 2021-10-31   0.436535    0.131025    0.176291     0.262282
 2021-11-30   0.0276035  -0.0701279  -0.00310596  -0.017631
 2021-12-31  -0.0768384  -0.0614737   0.0173326   -0.0518583</code></pre><h2 id="Average-returns-and-risk"><a class="docs-heading-anchor" href="#Average-returns-and-risk">Average returns and risk</a><a id="Average-returns-and-risk-1"></a><a class="docs-heading-anchor-permalink" href="#Average-returns-and-risk" title="Permalink"></a></h2><p>You can use the <strong>mean_return( )</strong> function to calculate the average asset returns of some period.</p><p class="math-container">\[\mu = \frac{1}{n} \sum_{i=1}^n x_i\]</p><pre><code class="language-julia hljs">mean_return(all_returns)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4-element Named Vector{Float64}
μ    │ 
─────┼──────────
TSLA │ 0.0431772
NFLX │  0.010848
MSFT │ 0.0366371
PORT │ 0.0289375</code></pre><p>To calculate the <em>geometric mean</em>, set the <strong>geometric</strong> parameter to <code>true</code>.</p><pre><code class="language-julia hljs">mean_return(all_returns, geometric=true)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4-element Named Vector{Float64}
μ    │ 
─────┼───────────
TSLA │  0.0342267
NFLX │ 0.00904634
MSFT │  0.0350585
PORT │  0.0257348</code></pre><p>To calculate the standard deviation of asset returns of some period, you can use the <strong>stddev( )</strong> function.</p><p class="math-container">\[\sigma = \sqrt{\frac{1}{n} \sum_{i=1}^n (x_i - \mu)^2}\]</p><pre><code class="language-julia hljs">stddev(all_returns)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4-element Named Vector{Float64}
σ    │ 
─────┼──────────
TSLA │  0.149608
NFLX │ 0.0637211
MSFT │ 0.0603753
PORT │ 0.0879347</code></pre><h2 id="Comparing-returns-and-risk"><a class="docs-heading-anchor" href="#Comparing-returns-and-risk">Comparing returns and risk</a><a id="Comparing-returns-and-risk-1"></a><a class="docs-heading-anchor-permalink" href="#Comparing-returns-and-risk" title="Permalink"></a></h2><p>Annualizing is converting a rate of return for a period other than one year into an equivalent annual rate. It helps to compare different investments with different time horizons. For example, if you invest <span>$</span>1000 in a stock that pays 5% interest every six months, your annualized return is <code>(1+0.05)^2 - 1 = 10.25%</code>. This means you would earn 10.25% interest on your investment if you held it for one year.</p><p>Annualizing risk measures is similar to annualizing returns but depends on the risk measure used. For example, the standard deviation is a common measure of volatility that can be annualized by multiplying it by the square root of the number of periods per year. However, some risk measures, such as Value at Risk (VaR) or Expected Shortfall (ES), cannot be annualized by simple multiplication because they depend on the distribution of returns.</p><h6 id="Returns"><a class="docs-heading-anchor" href="#Returns">Returns</a><a id="Returns-1"></a><a class="docs-heading-anchor-permalink" href="#Returns" title="Permalink"></a></h6><ol><li><strong>Annual return</strong>: total return earned over one calendar year.</li><li><strong>Annualized return</strong>: yearly <em>rate of return</em> inferred from any time period.</li><li><strong>Average return</strong>: total return realized over a longer period, spread evenly over the (shorter) periods.</li><li><strong>Cumulative (compounding) return</strong>: A return that includes the compounded results of reinvesting interest, dividends, and capital gains.</li></ol><h6 id="Annualizing-returns"><a class="docs-heading-anchor" href="#Annualizing-returns">Annualizing returns</a><a id="Annualizing-returns-1"></a><a class="docs-heading-anchor-permalink" href="#Annualizing-returns" title="Permalink"></a></h6><p>Annualizing a return means calculating the return if it was compounded over a year. We can annualize the returns by multiplying them by a time component depending on their frequency. For example, if you measure a monthly return, you can multiply it by 12 to get an annualized return. On the other hand, if you measure a quarterly return, you can multiply it by 4.</p><ul><li><strong>From monthly returns</strong>: $ Return_{Ann} = Return*12$</li><li><strong>From daily returns</strong>:  $ Return_{Ann} = Return*252$</li></ul><p>Where:</p><ul><li><span>$Return$</span> is the <strong><code>return</code></strong> of an asset or portfolio we want to annualize.</li></ul><p>As we use monthly returns in our example, we need to multiply them by <em>12</em> to annualize.</p><pre><code class="language-julia hljs">returns_annualized  = mean_return(all_returns) .* 12</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4-element Named Vector{Float64}
μ    │ 
─────┼─────────
TSLA │ 0.518126
NFLX │ 0.130176
MSFT │ 0.439646
PORT │  0.34725</code></pre><h6 id="Annualizing-standard-deviation"><a class="docs-heading-anchor" href="#Annualizing-standard-deviation">Annualizing standard deviation</a><a id="Annualizing-standard-deviation-1"></a><a class="docs-heading-anchor-permalink" href="#Annualizing-standard-deviation" title="Permalink"></a></h6><ul><li><strong>From std of monthly returns</strong>: $ Std_{Ann} = Std*\sqrt{12}$</li><li><strong>From std of daily returns</strong>:  $ Std_{Ann} = Std*\sqrt{252}$</li></ul><p>Where:</p><ul><li><span>$Std$</span> is the <strong><code>standard deviation</code></strong> of returns of an asset or portfolio we want to annualize.</li></ul><p>We can multiply the result of StdDev by <span>$\sqrt{12}$</span> to annualize the standard deviation of monthly returns.</p><pre><code class="language-julia hljs">std_annualized  = stddev(all_returns) .* sqrt(12)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4-element Named Vector{Float64}
σ    │ 
─────┼─────────
TSLA │ 0.518257
NFLX │ 0.220736
MSFT │ 0.209146
PORT │ 0.304615</code></pre><h2 id="Moments"><a class="docs-heading-anchor" href="#Moments">Moments</a><a id="Moments-1"></a><a class="docs-heading-anchor-permalink" href="#Moments" title="Permalink"></a></h2><p>Moments are statistical measures that describe certain characteristics of a probability distribution. They are based on the expected values of powers of a random variable. For example, if X is a random variable, then its moments are defined as E(X), E(X²), E(X³), E(X⁴), etc.</p><p>The first moment is equal to the <strong>mean</strong> of X. The second moment is related to the <strong>variance</strong> of X. The third moment is associated with the <strong>skewness</strong> of X. Finally, the fourth moment is related to the <strong>kurtosis</strong> of X. </p><p>You can use the <strong>moments( )</strong> function to calculate the statistical moments of asset returns of interest.  <strong>Standard deviation</strong> is a more widely used risk metric than the variance in portfolio management; therefore <em>moments( )</em> function uses standard deviation instead of variance.</p><p><em>Mean return</em> is considered as <em>expected return</em> in many applications. It&#39;s the sum of a series of returns divided by the count of that series of returns.</p><p class="math-container">\[\mu = \frac{\sum_{i=1}^n x_i}{n}\]</p><p><em>Standard deviation</em> is a statistical measurement in finance that is widely used as an investment&#39;s historical volatility.</p><p class="math-container">\[\sigma = \sqrt{\frac{\sum_{i=1}^n (x_i - \mu)^2}{n}}\]</p><p>Skewness measures how asymmetric or lopsided a distribution of returns is. Skewness is an important statistical concept because it helps us understand data sets that may not appear &quot;normal.&quot; It tells us if returns have been extreme or not. Investors prefer positive skewness, which means more frequent positive returns than negative ones.</p><p class="math-container">\[skewness = \frac{\sum_{i=1}^n (x_i - \mu)^3}{n . \sigma^3}\]</p><p>Kurtosis measures how peaked or flat the distribution of returns is. It tells you how often extreme returns occur. Investors generally consider high kurtosis a sign of higher risk because it means more frequent extreme returns (positive or negative) than normal. This is called kurtosis risk. When the excess kurtosis is around 0, or the kurtosis equals about 3, the tails&#39; kurtosis level is similar to the normal distribution. </p><p>In the <em>moments( )</em> function, <em>kurtosis</em> refers to <em>excess kurtosis</em>, which is <code>kurtosis − 3</code>.</p><p class="math-container">\[kurtosis = \frac{\sum_{i=1}^n (x_i - \mu)^4}{n . \sigma^4}\]</p><pre><code class="language-julia hljs">moments(all_returns)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4×4 Named Matrix{Float64}
Tickers ╲ Moments │      Mean        Std   Skewness   Kurtosis
──────────────────┼───────────────────────────────────────────
TSLA              │ 0.0431772   0.149608    1.36882    2.19682
NFLX              │  0.010848  0.0637211   0.604374  -0.808401
MSFT              │ 0.0366371  0.0603753   0.681468   0.790701
PORT              │ 0.0289375  0.0879347    1.53379    2.19321</code></pre><h2 id="Sharpe-Ratio"><a class="docs-heading-anchor" href="#Sharpe-Ratio">Sharpe Ratio</a><a id="Sharpe-Ratio-1"></a><a class="docs-heading-anchor-permalink" href="#Sharpe-Ratio" title="Permalink"></a></h2><p>The Sharpe ratio is a way to measure how well an investment performs relative to its risk. It compares an investment&#39;s returns with a benchmark (such as a risk-free asset) and adjusts for its volatility. The higher the ratio, the better the investment in terms of risk-adjusted returns.</p><p>A positive Sharpe ratio means that the investment has outperformed the risk-free rate. Conversely, a negative Sharpe ratio indicates that the investment has underperformed the risk-free rate.</p><p class="math-container">\[Sharpe \space\ Ratio = \frac{R_p \space\ – \space\ R_f}{\sigma_p}\]</p><p>Where; <span>$R_p$</span> is a portfolio&#39;s <code>average return</code> over some period.<br/><span>$\sigma_p$</span> is the <code>standard deviation</code> for the same period.<br/><span>$R_f$</span> is the <code>risk-free rate.</code></p><pre><code class="language-julia hljs">sharpe(all_returns)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4-element Named Vector{Float64}
Sharpe Ratio (Rf=0)  │ 
─────────────────────┼─────────
TSLA                 │ 0.288602
NFLX                 │ 0.170242
MSFT                 │ 0.606824
PORT                 │ 0.329079</code></pre><p>Based on Jan through Dec 2021, we&#39;d obtain the best return by buying Microsoft stocks after adjusting for the risk. </p><p>Sharpe Ratios are equal to the effective return divided by the standard deviation. Similar to annualizing standard deviation, daily, weekly, or monthly Sharpe Ratios are annualized by multiplying by the square root of the higher frequency period. </p><pre><code class="language-julia hljs">sharpe_annualized  = sharpe(all_returns) .* sqrt(12)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4-element Named Vector{Float64}
Sharpe Ratio (Rf=0)  │ 
─────────────────────┼─────────
TSLA                 │ 0.999747
NFLX                 │ 0.589734
MSFT                 │   2.1021
PORT                 │  1.13996</code></pre><h2 id="Value-at-Risk"><a class="docs-heading-anchor" href="#Value-at-Risk">Value at Risk</a><a id="Value-at-Risk-1"></a><a class="docs-heading-anchor-permalink" href="#Value-at-Risk" title="Permalink"></a></h2><p><em>VaR</em> is a statistical technique that gives the probability of losing more than a given amount that could happen in an investment portfolio over a specified period. It is usually expressed as a percentage or a dollar amount indicating how much money is at risk over a given period. For example, if an investment has a 5% VaR of <span>$</span>10 million for one day, there is a 5% chance that it will lose more than <span>$</span>10 million in one day.</p><p>There are different methods to calculate VaR, such as <em>historical</em>, <em>variance-covariance</em>, also known as <em>parametric</em>, and <em>Monte Carlo</em>.</p><p>In PortfolioAnalytics.jl, <em>Value at Risk</em> is calculated using the <strong>VaR( )</strong> function. By default, it calculates the <em>VaR</em> of asset returns based on the <em>historical simulation</em> method at <em>95%</em> and expresses it as a <em>percentage</em>.</p><h3 id="Methods-for-using-calculating-VaR"><a class="docs-heading-anchor" href="#Methods-for-using-calculating-VaR">Methods for using calculating VaR</a><a id="Methods-for-using-calculating-VaR-1"></a><a class="docs-heading-anchor-permalink" href="#Methods-for-using-calculating-VaR" title="Permalink"></a></h3><h4 id=".-Historical-method"><a class="docs-heading-anchor" href="#.-Historical-method">1. Historical method</a><a id=".-Historical-method-1"></a><a class="docs-heading-anchor-permalink" href="#.-Historical-method" title="Permalink"></a></h4><p>The historical simulation does not assume a particular distribution of asset returns. Instead, it involves taking market data for a certain period (e.g., 250 days) and calculating the percentage change over some period (e.g., daily). The <em>VaR</em> is then calculated as a percentile of these daily percentage changes (returns).</p><pre><code class="language-julia hljs">VaR(all_returns)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4-element Named Vector{Float64}
95% historical VaR  │ 
────────────────────┼───────────
TSLA                │  -0.132252
NFLX                │ -0.0653681
MSFT                │  -0.035206
PORT                │ -0.0558624</code></pre><p>The output tells us that there is a <code>5%</code> chance that our portfolio (<em>PORT</em>) will lose more than <code>5.59%</code> in a month.</p><p>We also can specify the confidence level.</p><pre><code class="language-julia hljs">VaR(all_returns, 0.90)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4-element Named Vector{Float64}
90% historical VaR  │ 
────────────────────┼────────────
TSLA                │   -0.114551
NFLX                │  -0.0585165
MSFT                │ -0.00923279
PORT                │  -0.0540473</code></pre><h4 id=".-Parametric-VaR"><a class="docs-heading-anchor" href="#.-Parametric-VaR">2. Parametric VaR</a><a id=".-Parametric-VaR-1"></a><a class="docs-heading-anchor-permalink" href="#.-Parametric-VaR" title="Permalink"></a></h4><p><em>Parametric VaR</em>, also known as the <em>variance-covariance</em> method, is a method that uses two main inputs: the <em>mean</em> and <em>standard deviation</em>. It assumes that the assets (or portfolio)&#39;s returns are normally distributed. The calculated standard deviation is used to derive a <em>standard normal z score</em> to size up the position with a confidence level (according to a pre-determined table).</p><p>To calculate the <em>parametric VaR</em>, we need to specify it using the <strong>method</strong> argument.</p><pre><code class="language-julia hljs">VaR(all_returns, method = &quot;parametric&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4-element Named Vector{Float64}
95% parametric VaR  │ 
────────────────────┼───────────
TSLA                │  -0.202906
NFLX                │ -0.0939639
MSFT                │ -0.0626713
PORT                │  -0.115702</code></pre><h4 id=".-Monte-Carlo-Method"><a class="docs-heading-anchor" href="#.-Monte-Carlo-Method">3. Monte Carlo Method</a><a id=".-Monte-Carlo-Method-1"></a><a class="docs-heading-anchor-permalink" href="#.-Monte-Carlo-Method" title="Permalink"></a></h4><p>The <em>Monte Carlo</em> method is a technique of numerical integration that can be used to estimate the value at risk (VaR). It simulates many possible scenarios by changing multiple variables and produces probability distributions of risk.</p><h2 id="Expected-Shortfall-(CVaR)"><a class="docs-heading-anchor" href="#Expected-Shortfall-(CVaR)">Expected Shortfall (CVaR)</a><a id="Expected-Shortfall-(CVaR)-1"></a><a class="docs-heading-anchor-permalink" href="#Expected-Shortfall-(CVaR)" title="Permalink"></a></h2><p><em>Value-at-risk (VaR)</em> is a risk measure that quantifies the maximum loss of a portfolio at a given confidence level and time horizon. For example, if a bank’s 10-day 99% VaR is 20%, there is considered to be only a 1% chance that losses will exceed 20% in 10 days.</p><p><strong>Expected Shortfall (ES)</strong>, also known as the <strong>Conditional Value at Risk (CVaR)</strong>, is a risk measure that quantifies the average loss of a portfolio beyond the VaR level. For example, if the expected shortfall at a 99% confidence level is 30%, it means that the average loss of the portfolio is 30%  when the loss is greater than or equal to 20% (VaR).</p><p>The main difference between <em>VaR</em> and <em>ES</em> is that <em>VaR</em> only considers losses up to a certain threshold, while <em>ES</em> considers losses beyond that threshold. This means that <em>ES</em> captures more information about the tail risk of a portfolio than VaR does. <em>ES</em> is also considered more coherent and subadditive than VaR, which satisfies some desirable properties for a risk measure.</p><pre><code class="language-julia hljs">es(all_returns)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4-element Named Vector{Any}
95% historical ES  │ 
───────────────────┼───────────
TSLA               │  -0.148766
NFLX               │ -0.0701279
MSFT               │  -0.066119
PORT               │ -0.0577836</code></pre><p>Similar to the <em>VaR( )</em> function, we can specify the <strong>confidence level</strong> and <strong>method</strong> of the calculation in the <em>es( )</em> function. </p><pre><code class="language-julia hljs">es(all_returns, 0.80, method = &quot;parametric&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">4-element Named Vector{Any}
80% parametric ES  │ 
───────────────────┼───────────
TSLA               │  -0.133754
NFLX               │ -0.0658008
MSFT               │  -0.066119
PORT               │ -0.0546442</code></pre><h2 id="Portfolio-Optimization"><a class="docs-heading-anchor" href="#Portfolio-Optimization">Portfolio Optimization</a><a id="Portfolio-Optimization-1"></a><a class="docs-heading-anchor-permalink" href="#Portfolio-Optimization" title="Permalink"></a></h2><p>Portfolio optimization is selecting the best portfolio from a set of possible portfolios according to some objective. The objective usually involves maximizing expected return and minimizing risk. </p><p>Many portfolio optimization methods use different criteria and techniques to find the optimal portfolio. Some of the common methods are:</p><ul><li><em>Mean-variance (MV)</em>: This method uses expected return and variance as measures of reward and risk and tries to find the portfolio with the highest return for a given level of risk or the lowest risk for a given level of return.</li><li><em>Sharpe Ratio</em>: This method tries to find the portfolio with the highest return for a given level of Sharpe Ratio. </li><li><em>Value-at-Risk (VaR)</em>: This method uses a probability threshold to measure risk and tries to find the portfolio with the highest return while keeping its loss below a certain level with a specified confidence level.</li><li><em>Expected Shortfall</em>: This method uses expected loss beyond VaR as a measure of risk and tries to find the portfolio with the highest return while minimizing its potential extreme loss.</li></ul><p>The <strong>portfolio_optimize( )</strong> function is used to find the optimal weights of a portfolio for a chosen objective and target return. The set of optimal portfolios forms a curve called the <strong>efficient frontier</strong>.</p><p>At the moment it is possible to find <em>mean-variance</em> and <em>maximum-sharpe</em> portfolios. Optimization using <em>Value at Risk (VaR)</em> and <em>Expected Shortfall (ES)</em> will be implemented as part of the next releases.</p><h4 id="Risk-of-a-portfolio"><a class="docs-heading-anchor" href="#Risk-of-a-portfolio">Risk of a portfolio</a><a id="Risk-of-a-portfolio-1"></a><a class="docs-heading-anchor-permalink" href="#Risk-of-a-portfolio" title="Permalink"></a></h4><ul><li>Investing is risky: individual assets will go up or down</li><li>Expected return is a <strong>random variable</strong></li><li>Returns spread around the mean are measured by the variance <strong>σ</strong> and is a common measure of volatility</li><li>Variance of an individual asset varies: some have more or less spread around the mean</li><li>Variance of the portfolio is <strong>not</strong> simply weighted variances of the underlying assets</li><li>Because returns of assets are correlated, it becomes complex</li><li>The <strong>correlation</strong> between asset 1 and asset 2 is denoted by <span>$P_{1,2}$</span> and tells us to which extend assets move together</li><li>The portfolio variance takes into account the individual assets&#39; variance <span>$(σ_{1}^2,σ_{2}^2,etc.)$</span>, the <strong>weights</strong> of the assets in portfolio <span>$(w_{1}, w_{2})$</span>, as well as their <strong>correlation</strong> to each other</li></ul><h4 id="Calculating-two-asset-portfolio-variance"><a class="docs-heading-anchor" href="#Calculating-two-asset-portfolio-variance">Calculating two-asset portfolio variance</a><a id="Calculating-two-asset-portfolio-variance-1"></a><a class="docs-heading-anchor-permalink" href="#Calculating-two-asset-portfolio-variance" title="Permalink"></a></h4><p class="math-container">\[\sigma_{p}^2 = w_{1}^2σ_{1}^2 + w_{2}^2σ_{2}^2 + 2w_{1}w_{2}p_{1,2}σ_{1}σ_{2}\]</p><ul><li><span>$p_{1,2}σ_{1}σ_{2}$</span> is called the covariance between asset 1 and 2</li><li>The covariance can also be written as <span>$σ_{1,2}$</span></li><li>The equation then becomes:</li></ul><p class="math-container">\[\sigma_{p}^2 = w_{1}^2σ_{1}^2 + w_{2}^2σ_{2}^2 + 2w_{1}w_{2}σ_{1,2}\]</p><ul><li>This can be re-written in matrix notation, which we can generalize the concept</li></ul><h5 id="Two-asset-portfolio-variance-matrix-form"><a class="docs-heading-anchor" href="#Two-asset-portfolio-variance-matrix-form">Two-asset portfolio variance matrix-form</a><a id="Two-asset-portfolio-variance-matrix-form-1"></a><a class="docs-heading-anchor-permalink" href="#Two-asset-portfolio-variance-matrix-form" title="Permalink"></a></h5><p class="math-container">\[\sigma_{p}^2 = \begin{bmatrix} w_{1} &amp; w_{2} \end{bmatrix} \begin{bmatrix} σ_{1}^2 &amp; σ_{1,2}  \\ σ_{2,1} &amp; σ_{2}^2 \end{bmatrix}\begin{bmatrix} w_{1} \\ w_{2} \end{bmatrix}\]</p><h5 id="Step-by-step-matrix-multiplications-for-two-asset-portfolio-variance"><a class="docs-heading-anchor" href="#Step-by-step-matrix-multiplications-for-two-asset-portfolio-variance">Step-by-step matrix multiplications for two-asset portfolio variance</a><a id="Step-by-step-matrix-multiplications-for-two-asset-portfolio-variance-1"></a><a class="docs-heading-anchor-permalink" href="#Step-by-step-matrix-multiplications-for-two-asset-portfolio-variance" title="Permalink"></a></h5><p class="math-container">\[\sigma_{p}^2 = \begin{bmatrix} w_{1} * σ_{1}^2 +  w_{2} * σ_{2,1}  &amp; w_{1} * σ_{1,2} +  w_{2}* σ_{2}^2\end{bmatrix} \begin{bmatrix} w_{1} \\ w_{2} \end{bmatrix}\]</p><p class="math-container">\[\sigma_{p}^2 = (w_{1} * σ_{1}^2 +  w_{2} * σ_{2,1}) * w_{1}  +  (w_{1} * σ_{1,2} +  w_{2}* σ_{2}^2) * w_{2}\]</p><p>where <span>$σ_{1,2} = σ_{2,1}$</span></p><p class="math-container">\[\sigma_{p}^2 = w_{1}^2σ_{1}^2 + w_{2}^2σ_{2}^2 + 2w_{1}w_{2}σ_{1,2}\]</p><p>So, it can be extended to any number of assets in the below form:</p><p class="math-container">\[Portfolio \space\ variance = w&#39; * Q * w\]</p><p>Where;</p><ul><li><span>$w$</span> is the assets&#39; weights in a portfolio</li><li><span>$w&#39;$</span> is the transpose of <span>$w$</span></li><li><span>$Q$</span> is the covariance matrix</li></ul><h3 id=".-Mean-Variance"><a class="docs-heading-anchor" href="#.-Mean-Variance">1. Mean-Variance</a><a id=".-Mean-Variance-1"></a><a class="docs-heading-anchor-permalink" href="#.-Mean-Variance" title="Permalink"></a></h3><p><a href="https://www.investopedia.com/terms/m/modernportfoliotheory.asp">Modern portfolio theory (MPT)</a> states that portfolio variance can be reduced by selecting securities with low or negative correlations in which to invest, such as stocks and bonds.</p><p>Mean-variance optimization is a quantitative tool that allows you to allocate your portfolio by considering the trade-off between risk and return. It is based on modern portfolio theory (MPT), a mathematical framework for assembling a portfolio of assets that maximizes expected return for a given level of risk. The optimal portfolio is found by minimizing the variance (or standard deviation) of the portfolio returns for a given expected return or maximizing the expected return for a given variance. </p><p>Portfolio expected return:</p><p class="math-container">\[μ_{p} =  \begin{bmatrix} w_{1} &amp; w_{2} \end{bmatrix} \begin{bmatrix} μ_{1} \\ μ_{2} \end{bmatrix}\]</p><p>Where;</p><ul><li><span>$μ_{1}$</span> and <span>$μ_{2}$</span> are the average returns for assets 1 and 2, respctively<br/></li><li><span>$w_{1}$</span> and <span>$w_{2}$</span> are the weights of assets 1 and 2 in a portfolio, respectively.<br/></li></ul><p>Portfolio standard deviation:</p><p class="math-container">\[\sigma_{p} = \sqrt{\sigma_{p}^2}\]</p><p>Note that we are solving the problem under the following assumptions:</p><ol><li>We are fully invested. The sum of weights is 1.</li><li>We can trade any continuum of shares.</li><li>No short-selling is allowed.</li><li>There are no transaction costs.</li></ol><pre><code class="language-julia hljs">opt = portfolio_optimize(returns)

opt.plt</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">qt.qpa.xcb: could not connect to display
qt.qpa.plugin: Could not load the Qt platform plugin &quot;xcb&quot; in &quot;&quot; even though it was found.
This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.

Available platform plugins are: linuxfb, minimal, offscreen, vnc, xcb.

Aborted (core dumped)
connect: Connection refused
GKS: can&#39;t connect to GKS socket application

GKS: Open failed in routine OPEN_WS
GKS: GKS not in proper state. GKS must be either in the state WSOP or WSAC in routine ACTIVATE_WS</code></pre><p><img src="../o3-plot.svg" alt/></p><p>Expected return for the minumum variance portfolio.</p><pre><code class="language-julia hljs">opt.preturn</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">0.0252</code></pre><p>Standard deviation, risk, for the mimumum variance portfolio.</p><pre><code class="language-julia hljs">opt.prisk</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">0.0531</code></pre><p>Optimal weights for the mimnumum variance portfolio.</p><pre><code class="language-julia hljs">opt.pweights</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">3-element Named Vector{Float64}
Optimal Weights  │ 
─────────────────┼───────
TSLA             │   -0.0
NFLX             │ 0.4438
MSFT             │ 0.5562</code></pre><p>So if we have <span>$</span>1000 and buy <span>$</span>440 (44%) Netflix shares and <span>$</span>560 (56%) Microsoft shares, we expect, on average, <span>$</span>25 (2.5%) monthly return and our portfolio to fluctuate <span>$</span>53 (5.3%). <span>$</span>25 (2.5%) monthly expected return is a good deal for a minimum-variance portfolio, but the data we work with in this tutorial is only from Jan 2021 through Dec 2021. It is one of the good years for the stock market. Be careful about the data you use when making investment decisions!</p><p>Investors do not always want to choose a portfolio with the lowest risk. Instead, they may want to accept a higher risk for a higher return. The best way to achieve this is to define a target return by setting a value to the <strong>target</strong> parameter in the <strong>portfolio_optimize( )</strong> function. It will automatically eliminate the portfolios with lower-than-defined target returns.</p><p>For example, we want optimal portfolios with monthly expected returns higher than 3.5%.</p><pre><code class="language-julia hljs">opt = portfolio_optimize(returns, target = 0.035)
opt.plt</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">qt.qpa.xcb: could not connect to display
qt.qpa.plugin: Could not load the Qt platform plugin &quot;xcb&quot; in &quot;&quot; even though it was found.
This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.

Available platform plugins are: linuxfb, minimal, offscreen, vnc, xcb.

Aborted (core dumped)
connect: Connection refused
GKS: can&#39;t connect to GKS socket application

GKS: Open failed in routine OPEN_WS
GKS: GKS not in proper state. GKS must be either in the state WSOP or WSAC in routine ACTIVATE_WS</code></pre><p><img src="../o4-plot.svg" alt/></p><h3 id=".-Sharpe-Ratio"><a class="docs-heading-anchor" href="#.-Sharpe-Ratio">2. Sharpe Ratio</a><a id=".-Sharpe-Ratio-1"></a><a class="docs-heading-anchor-permalink" href="#.-Sharpe-Ratio" title="Permalink"></a></h3><p>Portfolio optimization with the Sharpe ratio is a method of finding an optimal portfolio with the highest excess return per unit of risk. The optimal portfolio is found by maximizing the expected return for a given Sharpe ratio.</p><p>Portfolio expected return:</p><p class="math-container">\[μ_{p} =  \begin{bmatrix} w_{1} &amp; w_{2} \end{bmatrix} \begin{bmatrix} μ_{1} \\ μ_{2} \end{bmatrix}\]</p><p>Where;</p><ul><li><span>$μ_{1}$</span> and <span>$μ_{2}$</span> are the average returns for assets 1 and 2, respectively</li><li><span>$w_{1}$</span> and <span>$w_{2}$</span> are the weights of assets 1 and 2 in a portfolio, respectively.</li></ul><p>Portfolio Sharpe Ratio:</p><p class="math-container">\[Sharpe \space\ Ratio_{p} =  \frac{μ_{p} - rf}{σ_{p}}\]</p><p>Where;</p><ul><li><span>$μ_{p}$</span> is the portfolio expected return</li><li><span>$rf$</span> is the risk-free rate</li><li><span>$σ_{p}$</span> is the portfolio standard deviation</li></ul><p>Let&#39;s optimize the portfolio and plot the efficient frontier, a set of optimal portfolios that offer the highest expected return for a given level of Sharpe Ratio.</p><pre><code class="language-julia hljs">opt2 = portfolio_optimize(returns, &quot;maximum sharpe&quot;)
opt2.plt</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">qt.qpa.xcb: could not connect to display
qt.qpa.plugin: Could not load the Qt platform plugin &quot;xcb&quot; in &quot;&quot; even though it was found.
This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.

Available platform plugins are: linuxfb, minimal, offscreen, vnc, xcb.

Aborted (core dumped)
connect: Connection refused
GKS: can&#39;t connect to GKS socket application

GKS: Open failed in routine OPEN_WS
GKS: GKS not in proper state. GKS must be either in the state WSOP or WSAC in routine ACTIVATE_WS</code></pre><p><img src="../o5-plot.svg" alt/></p><p>Similar to <em>mean-variance</em> portfolios, we may consider portfolios with higher returns. Let&#39;s define a monthly target return of 4% and plot the efficient frontier.</p><pre><code class="language-julia hljs">opt2 = portfolio_optimize(returns, &quot;maximum sharpe&quot;, target = 0.04)
opt2.plt</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">qt.qpa.xcb: could not connect to display
qt.qpa.plugin: Could not load the Qt platform plugin &quot;xcb&quot; in &quot;&quot; even though it was found.
This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.

Available platform plugins are: linuxfb, minimal, offscreen, vnc, xcb.

Aborted (core dumped)
connect: Connection refused
GKS: can&#39;t connect to GKS socket application

GKS: Open failed in routine OPEN_WS
GKS: GKS not in proper state. GKS must be either in the state WSOP or WSAC in routine ACTIVATE_WS</code></pre><p><img src="../o6-plot.svg" alt/></p><p>It&#39;s possible to extract the <em>risk</em>, defined as standard deviation, <em>Sharpe ratio</em>, and <em>weights</em> of each optimal portfolio in <em>efficient frontier</em>. This is particularly useful if you would like to make custom plots.</p><p>List of expected returns per portfolio.</p><pre><code class="language-julia hljs">opt2.pm</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">25-element Vector{Float64}:
 0.03999999009858564
 0.04013236145932192
 0.04026473282761976
 0.040397104202791266
 0.04052947557908179
 0.04066184695704224
 0.04079421833684587
 0.04092658971853995
 0.04105896110216654
 0.041191332487754896
 ⋮
 0.04211793223996188
 0.042250303638013964
 0.04238267505204821
 0.042515046471296336
 0.04264741789728775
 0.04277978933304631
 0.04291216078607087
 0.04304453228603106
 0.043176903709005406</code></pre><p>List of objective values per portfolio. If the objective is <em>minimum-variance</em>, then standard deviations of each optimal portfolio. If the objective is set to the <em>maximum-sharpe</em>, then the Sharpe Ratios of each portfolio.</p><pre><code class="language-julia hljs">opt2.po</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">25-element Vector{Float64}:
 0.39584775653806653
 0.389759033366154
 0.3838457890331248
 0.3781031275938834
 0.37252608056932995
 0.3671096510597303
 0.36184885056582855
 0.3567387289222714
 0.3517743985197051
 0.3469510536755197
 ⋮
 0.31675438931213445
 0.31289942679533606
 0.30914748372585726
 0.3054949931343078
 0.3019385156391233
 0.29847473813713987
 0.29510047050558724
 0.2918126416260734
 0.28860830449932734</code></pre><p>List of weights corresponding to each portfolio on the efficient frontier.</p><pre><code class="language-julia hljs">opt2.pw</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">25-element Vector{Vector{Float64}}:
 [0.5141960534485567, -8.222496419315698e-9, 0.4858039547739397]
 [0.5344362521051751, -8.189595953560717e-9, 0.4655637560844209]
 [0.5546764519851748, -8.139658550126348e-9, 0.4453235561544837]
 [0.5749166529077911, -8.091850507002002e-9, 0.4250833551840593]
 [0.5951568540082792, -8.042326247082454e-9, 0.4048431540340471]
 [0.615397055371497, -7.990927799972414e-9, 0.3846029526194307]
 [0.6356372570201781, -7.938607899606727e-9, 0.36436275091842985]
 [0.6558774589663102, -7.884159952356611e-9, 0.34412254891784977]
 [0.6761176612128089, -7.828475254060132e-9, 0.32388234661566634]
 [0.6963578637635169, -7.771713883910157e-9, 0.30364214400819695]
 ⋮
 [0.8380392896181337, -7.404261415541048e-9, 0.16196071778612775]
 [0.8582794938794782, -7.3969829682098885e-9, 0.14172051351750464]
 [0.8785197022219837, -6.974463190935102e-9, 0.12148030475247946]
 [0.8987599102640739, -6.830300746512469e-9, 0.1012400965662269]
 [0.9190001195017873, -6.644411156878468e-9, 0.08099988714262388]
 [0.9392403305584048, -6.3759853052271336e-9, 0.06075967581758048]
 [0.9594805450629246, -5.902692529263711e-9, 0.040519460839768054]
 [0.9797207699660809, -4.612323631476875e-9, 0.02027923464624259]
 [0.9999609694113909, -6.7927567757340564e-9, 3.903738136598841e-5]</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../installation/">« Installation</a><a class="docs-footer-nextpage" href="../functions/">Functions »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Tuesday 28 February 2023 21:16">Tuesday 28 February 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
